
@{
    ViewBag.Title = "InventoryExportHistory";
}

<h2>Danh sách xuất kho </h2>

@(Html.DevExtreme().DataGrid<NNworking.Models.C242_InventoryExportHistory>()
        .DataSource(ds => ds.WebApi()
            .RouteName("C242_InventoryExportHistoryApi")
            .LoadAction("Get")
            .InsertAction("Post")
            .UpdateAction("Put")
            .DeleteAction("Delete")
            .Key("ID")
        )
        .ID("dxDataGridInventoryExportHistory")
        .Paging(page => page.PageSize(30))
        .Pager(pager => pager.ShowPageSizeSelector(true)
            .ShowInfo(true)
            .AllowedPageSizes(new List<int> { 30, 50, 100, 200 })
        )
        .Sorting(sort => sort.Mode(GridSortingMode.Multiple)
            .DescendingText("ID")
        )
        .ColumnAutoWidth(true)
        .FilterRow(fil => fil.Visible(true))
        .FilterPanel(fi => fi.Visible(true))
        .SearchPanel(search => search.Visible(true)
            .HighlightSearchText(true)
            .Width(500)
        )
        //.HeaderFilter(headFil => headFil.Visible(true))
        .ShowColumnHeaders(true)
        .ShowRowLines(true)
        .RemoteOperations(true)
        .Columns(columns =>
        {

            columns.AddFor(m => m.ID);

            columns.AddFor(m => m.Date);

            columns.AddFor(m => m.ExportOrder);

            columns.AddFor(m => m.SharedOrder);

            columns.AddFor(m => m.SharedQty);

            columns.AddFor(m => m.Note);
        })
        .Editing(e => e
            .AllowAdding(true)
            .AllowUpdating(true)
            .AllowDeleting(true)
        )
        .OnInitNewRow("OnInitNewRow")
)

<div id="PopupPanel">

    <div>
        <table class="table table-advance">
            <tr>
                <td>Order xuất hàng:</td>
                <td>
                   
                </td>
            </tr>
            <tr>
                <td>Link truy cập:</td>
                <td>
                    
                </td>
            </tr>
        </table>
        <input class="btn VP" style="margin-top: 10px;" type="Button" tabindex="" id="InputPermissionContent" name="" value="Nhập" onclick="InputPermissionContent()">
    </div>
</div>

<div class="PopupPanel hide"></div>

<script>
    var popupStatus = 0;
    $(document).ready(function () {
        /** các hàm dùng chug cho popup**/
        $(this).keydown(function (event) {
            if (event.which == 27) {
                disablePopup();
            }
        });

        $("#background-popup").click(function () {
            disablePopup();
        });

        function loadBackgroundToPopup() {
            $("#background-popup").css("opacity", "0.2");
            $("#background-popup").fadeIn(200);
        }

        function disablePopup() {
            if (popupStatus >= 1) {
                $("#background-popup").fadeOut(200);
                $("#PopupPanel").fadeOut(200);
                popupStatus = 0;
            }
        }

        /** load các popup của các phần **/
        function loadPopupPanel() {
            if (popupStatus == 0) {
                $("#PopupPanel").fadeIn(200);
                loadBackgroundToPopup();
                popupStatus = 1;
            }
        }

        $(".PopupPanel").click(function () {
            loadPopupPanel();
        });
    })
</script>

<script>
    function OnInitNewRow(e) {
        e.data.ID = 0;
    }
</script>